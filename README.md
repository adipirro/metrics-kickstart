## Summary

Starting point for collecting metrics using StatsD and graphing them in Grafana. Trying to keep things simple and close to the defaults.

## Images

[Telegraf][hub-telegraf] - Official Alpine Linux image.

[InfluxDB][hub-influx] - Official Alpine Linux image.

[Grafana][hub-grafana] - Alpine Linux image built by myself. Official image did not have an alpine version. Once it does, will switch to that.

## Configuration

The configuration files in this repo are mounted on container startup time. Feel free to make any modifications and adjust things to your needs. You will want to consult the docs for each tool for more configuration details.  

#### Grafana

`grafana/custom.ini`

Config file is based on `grafana/conf/defaults.ini` from the container. This was done by running the following commands:

```
docker-compose run grafana cat /grafana/conf/defaults.ini > grafana/custom.ini.default
```
This command starts up the grafana container and spits the default configuration out to a file.

See the [Grafana documentation][config-grafana] for more information on config files.

#### InfluxDB

`influxdb/influxdb.conf`

Base-config file was generated by running the following command:

```
docker-compose run influxdb influxd config > influxdb/influxdb.conf.default
```
This command starts up the influxdb container as we have it configured, runs the `influxd config` command and spits the result out to a file.

See the [Influxdb documentation][config-influxdb] for more information on config files.

#### Telegraf

`telegraf/telegraf.conf`

Base-config file can be generated by running the following command:

```
docker-compose run telegraf -sample-config -input-filter statsd -output-filter influxdb > telegraf/telegraf.conf.default

```
This command starts up the telegraf container as we have it configured...runs the sample config command (with filters) and spits it out to a file.

Since this is being run in a separate container, we can not use `localhost` to connect to InfluxDB. This results in the only non-default config:

```
urls = ["http://influxdb:8086"]
```

See the [Telegraf documentation][config-telegraf] for more information on config files.

Links.

[hub-influx]: https://hub.docker.com/_/influxdb/
[hub-telegraf]: https://hub.docker.com/_/telegraf/
[hub-grafana]: https://hub.docker.com/r/adipirro852/grafana/
[alpine]: https://www.alpinelinux.org/about/
[config-telegraf]: https://docs.influxdata.com/telegraf/v1.0/administration/configuration/
[config-influxdb]: https://docs.influxdata.com/influxdb/v1.0/administration/config/
[config-grafana]: http://docs.grafana.org/installation/configuration/
[compose-networking]: https://docs.docker.com/compose/networking/
